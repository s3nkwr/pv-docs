# Установка на сервер

В большинстве случаях Plasmo Voice должен работать из коробки.

Если это не так, прочитайте эту статью, чтобы выяснить почему.

## Требования

### Защита от ДДоС

По умолчанию Plasmo Voice не работает с TCP Shield, NeoProtect или аналогичным прокси-сервисом.

Это все еще возможно заставить его работать, но вам нужно настроить отдельный UDP Прокси.

Прочитайте: [DDoS Protection Setup](/ru/docs/server/udp-proxy/)

### UDP Порты

Вам нужен сервер с открытыми портами `UDP`.

`UDP` - это сетевой протокол, используемый Plasmo Voice, в отличие от `TCP`, используемого сервером Minecraft.

Порты `UDP` и `TCP` отличаются друг от друга.

Например, у вас может быть открыт `25565 TCP` порт, и ваш сервер Minecraft будет работать просто отлично.

Но UDP-порт `25565` может быть закрыт. Из-за этого Plasmo Voice не будет работать.

Поскольку порты разные, это также означает, что вы можете использовать `25565 TCP` для вашего сервера Minecraft и `25565 UDP` для сервера голосового чата. Порты не будут конфликтовать.

### Использование хостинга для Minecraft

Обычно ваш основной порт будет доступен как `UDP`, так и `TCP`. Иногда вам нужно будет создать дополнительный порт и использовать его вместо основного.

Просмотрите документацию по хостингу, чтобы найти информацию о портах `UDP` или руководства по установке мода голосового чата.

Если вы ничего не нашли, и у вас возникают трудности с установкой, обратитесь за помощью в службу поддержки хостинга.

### Хостинг на вашем ПК

Открытие порта `UDP` - это то же самое, что и открытие порта `TCP`.

Когда вы открываете порт в настройках брандмауэра или маршрутизатора, вы можете выбрать протокол.

Просто убедитесь, что вы открыли и `UDP`, и `TCP`.

### Bungee или Velocity

Прочитайте: [Установка на Прокси](/ru/docs/server/proxy/) 

## Установите клиентский мод

Чтобы голосовой чат работал, вам необходимо установить [Forge или Fabric mod](https://modrinth.com/mod/plasmo-voice) на свой клиент. Игроки без мода могут присоединиться и играть как обычно.

Серверы Paper, Fabric и Forge совместимы с клиентами Fabric и Forge.

![](https://imgur.com/dxgaWJ2.png)

*Предполагается, что Plasmo Voice установлен как на клиенте, так и на сервере*

## Установка

1. Скачайте плагин или мод с сайта [Modrinth](https://modrinth.com/mod/plasmo-voice).
2. Установите мод или плагин.
   - Для Paper установите плагин в папку `~/plugins/`.
   - Для Fabric или Forge установите мод в `~/mods/`.
3. Перезапустите сервер.
4. Присоединитесь к серверу.
5. Нажмите `V`, чтобы открыть меню голосового чата.

Если вы видите меню, то плагин работает.

Если появится надпись `Connecting...`, `Can't connect` или `Not installed`, перейдите к следующему шагу.

## Редактирование конфига

- Расположение конфига на Fabric и Forge: `~/config/plasmovoice/config.toml`
- Расположение конфига на Paper: `~/plugins/PlasmoVoice/config.toml`

Есть два значения в конфиге, которые вы можете попробовать изменить, если Plasmo Voice не работает: `ip` и `port`.

```toml
# Default values
[host]
ip = "0.0.0.0"
port = 0
```

### IP

Значение `ip` будет использоваться в качестве **Адреса привязки**, по которому Plasmo Voice будет пытаться запустить голосовой сервер.

Если установлено значение `0.0.0.0`, то Plasmo Voice будет пытаться получить IP сервера, на котором он запущен.

Проблемы с привязкой адреса по умолчанию могут возникнуть, если на сервере несколько адресов. Такое часто случается с хостинг-провайдерами, специализирующимися на Minecraft.

Если вы считаете, что проблема может быть в этом, обратитесь в службу поддержки вашего хостинга и попросите их помочь вам.

### Порт

По умолчанию установлен порт `0`. Это означает, что Plasmo Voice будет использовать тот же порт, что и ваш сервер Minecraft.

Если ваш сервер Minecraft работает на `25565 TCP`, то **Voice Server** будет запущен на `25565 UDP`.

Мы уже объяснили все, что вам нужно знать о портах. Если вы пропустили это, вернитесь и прочитайте. Вы можете изменить это значение на любой другой порт, который вы хотите, чтобы Plasmo Voice использовал.

## Обычные проблемы

`java.net.BindException: Address already in use` Порт уже используется, вам следует выбрать другой порт.

`java.net.BindException: Cannot assign requested address` Не удается получить доступ к **Адресу привязки**, указанному в конфиге. Измените его на `0.0.0.0` или ваш локальный IP-адрес.
